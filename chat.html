<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scoreboard</title>

<style>
body {
  background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  color: white;
}

.container { width: 600px; }

.tabs {
  display: flex;
  margin-bottom: 10px;
}

.tabs button {
  flex: 1;
  padding: 10px;
  background: #111;
  border: 2px solid #00ffcc;
  color: #00ffcc;
  cursor: pointer;
}

.tabs button.active {
  background: #00ffcc;
  color: #111;
}

.scoreboard, .history {
  background: #111;
  border: 4px solid #00ffcc;
  border-radius: 18px;
  padding: 20px;
  box-shadow: 0 0 30px #00ffcc;
}

.hidden { display: none; }

.time {
  font-size: 56px;
  text-align: center;
}

.leading {
  color: #00ffcc;
  text-shadow: 0 0 12px #00ffcc;
}

.teams {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
}

.team {
  width: 45%;
  text-align: center;
}

.score { font-size: 64px; }

button {
  margin: 4px;
  padding: 6px 12px;
  background: #222;
  color: #00ffcc;
  border: 2px solid #00ffcc;
  border-radius: 6px;
  cursor: pointer;
}

button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.controls {
  margin-top: 15px;
  text-align: center;
}

input {
  width: 90%;
  padding: 6px;
  margin: 4px 0;
  text-align: center;
}

.history-item {
  border-bottom: 1px solid #00ffcc;
  padding: 8px 0;
}
</style>
</head>

<body>

<div class="container">

  <!-- TABS -->
  <div class="tabs">
    <button class="active" onclick="showTab('score', this)">Scoreboard</button>
    <button onclick="showTab('history', this)">Game History</button>
  </div>

  <!-- SCOREBOARD -->
  <div class="scoreboard" id="scoreTab">

    <div class="time" id="timeDisplay">12:00</div>

    <input id="timeInput" placeholder="Set time (mm:ss)">
    <button onclick="setTime()">Set Time</button>

    <div class="teams">

      <div class="team">
        <input id="teamAInput" placeholder="Team A Name">
        <div id="teamAName">Team A</div>
        <div>Timeouts: <span id="timeoutsA">2</span></div>
        <button id="timeoutBtnA" onclick="useTimeout('A')">Timeout</button>
        <div class="score" id="scoreA">0</div>
        <button onclick="addScore('A',1)">+1</button>
        <button onclick="addScore('A',3)">+3</button>
        <button onclick="addScore('A',6)">+6</button>
      </div>

      <div class="team">
        <input id="teamBInput" placeholder="Team B Name">
        <div id="teamBName">Team B</div>
        <div>Timeouts: <span id="timeoutsB">2</span></div>
        <button id="timeoutBtnB" onclick="useTimeout('B')">Timeout</button>
        <div class="score" id="scoreB">0</div>
        <button onclick="addScore('B',1)">+1</button>
        <button onclick="addScore('B',3)">+3</button>
        <button onclick="addScore('B',6)">+6</button>
      </div>

    </div>

    <div class="controls">
      <button onclick="toggleTimer()">Start / Pause</button>
      <button onclick="resetTimer()">Reset Timer</button>
      <button onclick="resetScores()">Reset Scores</button>
      <button onclick="resetTimeouts()">Reset Timeouts</button>
      <button onclick="recordGame()">ðŸ“¼ Record Game</button>
    </div>

  </div>

  <!-- HISTORY -->
  <div class="history hidden" id="historyTab">
    <h2>Recorded Games</h2>
    <div id="historyList"></div>
    <button onclick="clearHistory()">Clear History</button>
  </div>

</div>

<script>
/* STATE */
let scoreA = 0, scoreB = 0;
let time = "12:00";
let timer = null;
let timeoutsA = 2, timeoutsB = 2;

/* ELEMENTS */
const scoreAEl = document.getElementById("scoreA");
const scoreBEl = document.getElementById("scoreB");
const timeDisplay = document.getElementById("timeDisplay");
const teamAInput = document.getElementById("teamAInput");
const teamBInput = document.getElementById("teamBInput");
const teamAName = document.getElementById("teamAName");
const teamBName = document.getElementById("teamBName");
const timeoutsAEl = document.getElementById("timeoutsA");
const timeoutsBEl = document.getElementById("timeoutsB");
const timeoutBtnA = document.getElementById("timeoutBtnA");
const timeoutBtnB = document.getElementById("timeoutBtnB");
const historyList = document.getElementById("historyList");

/* TEAM NAMES */
teamAInput.oninput = e => teamAName.textContent = e.target.value || "Team A";
teamBInput.oninput = e => teamBName.textContent = e.target.value || "Team B";

/* SCORE */
function addScore(team, pts) {
  team === "A" ? scoreA += pts : scoreB += pts;
  scoreAEl.textContent = scoreA;
  scoreBEl.textContent = scoreB;
  highlightLeader();
}

function resetScores() {
  scoreA = scoreB = 0;
  scoreAEl.textContent = scoreBEl.textContent = 0;
  highlightLeader();
}

/* TIMEOUTS */
function useTimeout(team) {
  if (team === "A" && timeoutsA === 0) return;
  if (team === "B" && timeoutsB === 0) return;

  if (timer) {
    clearInterval(timer);
    timer = null;
  }

  addSeconds(5);

  if (team === "A") {
    timeoutsA--;
    timeoutsAEl.textContent = timeoutsA;
    if (timeoutsA === 0) timeoutBtnA.disabled = true;
  } else {
    timeoutsB--;
    timeoutsBEl.textContent = timeoutsB;
    if (timeoutsB === 0) timeoutBtnB.disabled = true;
  }
}

function resetTimeouts() {
  timeoutsA = timeoutsB = 2;
  timeoutsAEl.textContent = timeoutsBEl.textContent = 2;
  timeoutBtnA.disabled = timeoutBtnB.disabled = false;
}

/* TIMER */
function toggleTimer() {
  if (timer) {
    clearInterval(timer);
    timer = null;
    return;
  }

  timer = setInterval(() => {
    let [m, s] = time.split(":").map(Number);
    if (m === 0 && s === 0) return;
    if (s === 0) { m--; s = 59; } else s--;
    time = `${m}:${s.toString().padStart(2,"0")}`;
    timeDisplay.textContent = time;
  }, 1000);
}

function resetTimer() {
  if (timer) clearInterval(timer);
  timer = null;
  time = "12:00";
  timeDisplay.textContent = time;
}

function setTime() {
  const val = document.getElementById("timeInput").value;
  if (/^\d+:\d{2}$/.test(val)) {
    time = val;
    timeDisplay.textContent = time;
  }
}

function addSeconds(sec) {
  let [m, s] = time.split(":").map(Number);
  s += sec;
  m += Math.floor(s / 60);
  s %= 60;
  time = `${m}:${s.toString().padStart(2,"0")}`;
  timeDisplay.textContent = time;
}

/* RECORD GAME */
function recordGame() {
  const games = JSON.parse(localStorage.getItem("games") || "[]");

  games.push({
    teamA: teamAName.textContent,
    teamB: teamBName.textContent,
    scoreA,
    scoreB,
    date: new Date().toLocaleString()
  });

  localStorage.setItem("games", JSON.stringify(games));
  alert("Game recorded!");
}

/* HISTORY */
function loadHistory() {
  historyList.innerHTML = "";
  const games = JSON.parse(localStorage.getItem("games") || "[]");

  games.forEach(g => {
    const div = document.createElement("div");
    div.className = "history-item";
    div.textContent = `${g.date} â€” ${g.teamA} ${g.scoreA} : ${g.scoreB} ${g.teamB}`;
    historyList.appendChild(div);
  });
}

function clearHistory() {
  localStorage.removeItem("games");
  loadHistory();
}

/* LEADER */
function highlightLeader() {
  scoreAEl.classList.toggle("leading", scoreA > scoreB);
  scoreBEl.classList.toggle("leading", scoreB > scoreA);
}

/* TABS */
function showTab(tab, btn) {
  document.getElementById("scoreTab").classList.toggle("hidden", tab !== "score");
  document.getElementById("historyTab").classList.toggle("hidden", tab !== "history");
  document.querySelectorAll(".tabs button").forEach(b => b.classList.remove("active"));
  btn.classList.add("active");
  if (tab === "history") loadHistory();
}
</script>

</body>
</html>
